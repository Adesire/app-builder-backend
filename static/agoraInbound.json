{
    "events":
    [
        {
            "name":"Disconnected", 
            "commands":
            [
                {"stop":{}}
            ]
        },
        {
            "name":"badAudio", 
            "commands":
            [
                {"hangup":{"status":500, "reason":"Error", "reasonHeader":"api bad audio"}}
            ]
        },
        {
            "name":"Error", 
            "commands":
            [
                {"hangup":{"status":500, "reason":"Error", "reasonHeader":"api error occurred"}}
            ]
        }
    ],

    "dialogs":
    [
        {
            "name":"goodbye",
            "promptSets":
            [
                {
                    "name":"initial", 
                    "noBargeIn":
                    {
                        "prompts":
                        [
                            {"url":{"url":"goodbye.wav","maxAge":0,"maxStale":0}}
                        ]
                    }
                }
            ],
            "events":
            [
                {
                    "name":"promptsDone", 
                    "commands":
                    [
                        {"hangup":{}}
                    ]
                }
            ]
        },
        {
            "name":"inCall",
            "promptSets":
            [
                {
                    "name":"initial"
                },
                {
                    "name":"invalid", 
                    "noBargeIn":
                    {
                        "prompts":
                        [
                            {"url":{"url":"invalidMenu.wav","maxAge":0,"maxStale":0}}
                        ]
                    }
                }
            ],
            "events":
            [
                {
                    "name":"onLoad", 
                    "commands":
                    [
                        {"trace":{"text":"inCall onLoad"}},
                        {
                            "submit":
                            {
                                "fetchAudioMinDuration":6000,
                                "fetchAudioUrl":"ringing.wav",
                                "url":"https://infinite-dawn-92521.herokuapp.com/pstnHandle",
                                "type":"application/x-www-form-urlencoded",
                                "method":"GET",
                                "data":
                                [
                                    {"name":"agoraAppURL",  "value":{"var":"agoraAppURL"}},
                                    {"name":"accessMethod", "value":{"callInfo":"accessMethod"}},
                                    {"name":"fromNumber",   "value":{"callInfo":"fromNumber"}},
                                    {"name":"fromName",     "value":{"callInfo":"fromName"}},
                                    {"name":"toNumber",     "value":{"callInfo":"toNumber"}},
                                    {"name":"callID",       "value":{"callInfo":"callID"}}
                                ]
                            }
                        }
                    ]
                },
                {
                    "name":"noMatch", 
                    "commands":
                    [
                        {"trace":{"text":"noMatch in inCall - restart collection"}},
                        {"goto":{"dialog":"inCall", "promptSet":"invalid"}}
                    ]
                },
                {
                    "name":"noInput", 
                    "commands":
                    [
                        {"trace":{"text":"NoInput in inCall - should not be here"}},
                        {"goto":{"dialog":"goodbye", "promptSet":"initial"}}
                    ]
                },
                {
                    "name":"maxRepeat", 
                    "commands":
                    [
                        {"trace":{"text":"maxRepeat in inCall - should not be here"}},
                        {"goto":{"dialog":"goodbye", "promptSet":"initial"}}
                    ]
                }
            ]
        }
    ],
    "commands":
    [
        {"goto":{"dialog":"inCall", "promptSet":"initial"}} 
    ]
}
